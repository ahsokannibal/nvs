{
    "__comment1":"sql pour carte",
    "brouillard":"SELECT id FROM carte WHERE coordonnees NOT IN (SELECT ca.coordonnees FROM carte ca LEFT JOIN instance_batiment ib ON ((ca.x_carte BETWEEN(ib.x_instance -20) AND (ib.x_instance +20)) AND (ca.y_carte BETWEEN(ib.y_instance -20) AND(ib.y_instance +20))) WHERE (ib.id_batiment=8 OR ib.id_batiment=9) AND ib.camp_instance = ?) AND coordonnees NOT IN (SELECT ca2.coordonnees FROM carte ca2 LEFT JOIN instance_batiment ib2 ON ((ca2.x_carte BETWEEN(ib2.x_instance -10) AND (ib2.x_instance +10)) AND (ca2.y_carte BETWEEN(ib2.y_instance -10) AND(ib2.y_instance +10))) WHERE ib2.id_batiment=11 AND ib2.camp_instance = ?) AND coordonnees NOT IN (SELECT ca3.coordonnees FROM carte ca3 LEFT JOIN instance_batiment ib2 ON ((ca3.x_carte BETWEEN(ib2.x_instance -5) AND (ib2.x_instance +5)) AND (ca3.y_carte BETWEEN(ib2.y_instance -5) AND(ib2.y_instance +5))) WHERE ib2.id_batiment=2 AND ib2.camp_instance = ?) AND TIME_TO_SEC(TIMEDIFF(NOW(), vue_nord_date))>?",
    "visible":"SELECT c.id, c.idPerso_carte, c.fond_carte, c.image_carte, p.clan, p.idJoueur_perso, p.bataillon, comp.nom_compagnie, ib.camp_instance, b.nom_batiment FROM carte c LEFT JOIN perso p ON p.id_perso = c.idPerso_carte LEFT JOIN instance_batiment ib ON ib.id_instanceBat = c.idPerso_carte LEFT JOIN batiment b ON b.id_batiment = ib.id_batiment LEFT JOIN perso_in_compagnie pic ON pic.id_perso = p.id_perso LEFT JOIN compagnies comp ON comp.id_compagnie = pic.id_compagnie WHERE coordonnees not in (select coordonnees from carte where coordonnees NOT IN (SELECT ca.coordonnees FROM carte ca LEFT JOIN instance_batiment ib ON ((ca.x_carte BETWEEN(ib.x_instance -20) AND (ib.x_instance +20)) AND (ca.y_carte BETWEEN(ib.y_instance -20) AND(ib.y_instance +20))) WHERE (ib.id_batiment=8 OR ib.id_batiment=9) AND ib.camp_instance = ?) AND coordonnees NOT IN (SELECT ca2.coordonnees FROM carte ca2 LEFT JOIN instance_batiment ib2 ON ((ca2.x_carte BETWEEN(ib2.x_instance -10) AND (ib2.x_instance +10)) AND (ca2.y_carte BETWEEN(ib2.y_instance -10) AND(ib2.y_instance +10))) WHERE ib2.id_batiment=11 AND ib2.camp_instance = ?) AND coordonnees NOT IN (SELECT ca3.coordonnees FROM carte ca3 LEFT JOIN instance_batiment ib2 ON ((ca3.x_carte BETWEEN(ib2.x_instance -5) AND (ib2.x_instance +5)) AND (ca3.y_carte BETWEEN(ib2.y_instance -5) AND(ib2.y_instance +5))) WHERE ib2.id_batiment=2 AND ib2.camp_instance = ?) AND TIME_TO_SEC(TIMEDIFF(NOW(), vue_nord_date))>?) AND vue_nord = 1 OR (ib.id_batiment=13 AND vue_nord=1)", 
    "cases_deja_vues":"SELECT id, x_carte, y_carte, fond_carte FROM carte WHERE vue_nord = 1",
    "persos_dans_batiments": "SELECT c.id, pib.id_perso, p.clan, p.idJoueur_perso, p.bataillon, ib.x_instance, ib.y_instance, comp.nom_compagnie FROM perso_in_batiment pib LEFT JOIN perso p ON p.id_perso = pib.id_perso LEFT JOIN instance_batiment ib ON ib.id_instanceBat = pib.id_instanceBat LEFT JOIN perso_in_compagnie pic ON pic.id_perso = p.id_perso LEFT JOIN compagnies comp ON comp.id_compagnie = pic.id_compagnie  LEFT JOIN carte c ON c.x_carte = ib.x_instance AND c.y_carte = ib.y_instance WHERE p.clan=?",

    "__comment2":"sql pour carte_historique",
    "insert_carte_historique":"INSERT INTO carte_historique(clan, carte_date, carte_json) VALUES (?,CURDATE(),?)",
    "select_today_carte_historique":"SELECT id_carte_historique FROM carte_historique WHERE carte_date=CURDATE() AND clan = ?",
    "get_carte_historique":"SELECT carte_json FROM carte_historique WHERE clan = ? AND carte_date = ?"
}